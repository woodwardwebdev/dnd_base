<%include ../partials/header%>

<div class="jumbotron">
    <h1>Items Home Page</h1>
</div>


<div class="row button-options justify-content-around">
    <a href="/items/new"><button class = 'btn btn-large btn-outline-success'>Create Item</button></a>
</div>

<div class="row justify-content-around">
    <% items.forEach(function(item){ %>
        <% function rarecolor(){ %>
            <% let color; %>
            <% if(item.rarity == 'Common'){ %>
              <%  color = 'gray'; %>
            <% } else if(item.rarity == 'Uncommon'){ %>
                <% color = 'green'; %>
            <% } else if(item.rarity == 'Rare'){ %>
               <% color = 'steelblue'; %>
           <% } else if(item.rarity == 'Very Rare'){ %>
               <% color = 'purple'; %>
            <% } else if(item.rarity == 'Legendary'){ %>
               <% color = 'orange'; %>
            <% } else { %>
                <% color = 'black'; %>
            <% } %>
            <% return color; %>
        <% } %>
        <% let raritycolor = rarecolor(); %>
        <div class = 'card mb-4' style="min-width: 18em; max-width: 18em">
            <div class="card-body">
                <div class="card-title">           
                    <h5><%=item.name%></h5>
                </div>
                <div class="card-subtitle">
                    <p><%=item.type%>
                        <%if (item.armortype){%>
                            <span> - <%=item.armortype%></span> 
                        <%  }else if (item.weapontype){ %>
                            <span> - <%=item.weapontype%></span>
                        <% } %> 
                    <p><span style="color: <%=raritycolor%>"><%=item.rarity%></span></p>
                </div>
                <div class="card-text">      
                    <em><p><%=item.description%></p></em>
                </div>
                <% if(item.traits.length > 0){ %>
                    <div class="card-text">
                        <p><%=item.traits%></p>
                    </div>
                <% } %>
                <div class="card-text">
                            <%if(item.attunement == true){%>
                                <em><p>Requires attunement</p></em>
                            <% } else { %>
                                <em><p>Does not require attunement</p></em>
                            <% } %>
                </div>
                <div class="card-footer bg-transparent">
                    <div class="row justify-content-around">
                        <form action="/items/<%=item._id%>?_method=DELETE" method='POST'>
                            <button type="submit" class = 'btn btn-sm btn-outline-danger'>Delete Item</button>
                        </form>
                    </div>
                </div>
            </div> 
        </div>
    <% }) %>
</div>

<%include ../partials/footer%>